<%= render "shared/breadcrumbs" %>
<div class="flex flex-col mb-4 text-white">
  <%= link_to edit_user_study_plan_path(current_user, @study_plan), class: "flex btn-sm btn-warning text-gray-900 rounded items-center ml-auto mb-2", title: "Edit", aria: { label: "Edit Study Plan" } do %>
    <%= render_icon "pencil", klass: "size-5 mr-1" %> Edit
  <% end %>
  <header class="flex flex-col p-4 mb-10 bg-gray-700">
    <h1 class="mb-2 text-3xl font-bold">
      <%= @study_plan.name %>
    </h1>
    <p class="text-gray-300">
      <%= @study_plan.description.presence || "No description provided." %>
    </p>
  </header>
  <!-- Quizzes Section -->
  <section class="mb-12">
    <div class="flex items-center justify-between mb-4">
      <h2 class="text-2xl font-semibold text-white">
        Quizzes
      </h2>
      <%= link_to "New Quiz", "",
          class: "text-sm bg-blue-600 text-white px-3 py-1.5 rounded hover:bg-blue-700" %>
    </div>
    <% if @study_plan.quizzes.any? %>
      <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
        <% @study_plan.quizzes.each do |quiz| %>
          <div class="p-4 transition bg-white shadow rounded-xl hover:shadow-md">
            <h3 class="mb-1 text-lg font-semibold text-white">
              <%= quiz.title %>
            </h3>
            <p class="mb-3 text-sm text-gray-300">
              <%= truncate(quiz.description, length: 100) %>
            </p>
            <%= link_to "View Quiz", quiz_path(quiz),
                class: "text-sm text-blue-600 hover:underline" %>
          </div>
        <% end %>
      </div>
    <% else %>
      <p class="text-gray-300">No quizzes added yet.</p>
    <% end %>
  </section>
  <!-- Flashcard Decks Section -->
  <section>
    <div class="flex items-center justify-between mb-4">
      <h2 class="text-2xl font-semibold text-white">
        Flashcard Decks
      </h2>
      <%= link_to "New Deck", "",
          class: "text-sm bg-green-600 text-white px-3 py-1.5 rounded hover:bg-green-700" %>
    </div>
    <% if @study_plan.decks.any? %>
      <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
        <% @study_plan.decks.each do |deck| %>
          <div class="p-4 transition bg-white shadow rounded-xl hover:shadow-md">
            <h3 class="mb-1 text-lg font-semibold text-white">
              <%= deck.name %>
            </h3>
            <p class="mb-3 text-sm text-gray-300">
              <%= truncate(deck.description, length: 100) %>
            </p>
            <%= link_to "View Deck", deck_path(deck),
                class: "text-sm text-blue-600 hover:underline" %>
          </div>
        <% end %>
      </div>
    <% else %>
      <p class="text-gray-300">No decks added yet.</p>
    <% end %>
  </section>
</div>
