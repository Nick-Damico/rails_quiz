<%= render "shared/breadcrumbs" %>

<div class="flex flex-col space-y-2 md:space-y-2 w-full lg:w-1/2 max-w-[600px]">
  <section class="flex flex-col self-start pt-2 w-full bg-gray-800 rounded">
    <div class="inline-flex items-center bg-blue-500 px-4 p-1 mb-4">
      <h1 class="text-4xl font-semi-bold">
        <%= @quiz.title %> <br>
      </h1>
    </div>

    <div class="font-semibold ml-4 mb-2">
      <p class="uppercase">Author:</p>
      <p class="italic font-light ml-3"><%= @quiz.author.username %></p>
    </div>

    <div class="ml-4 mb-12 font-semibold">
      <p class="uppercase">Description:</p>
      <p class="italic font-light ml-3"><%= @quiz.description %></p>
    </div>

    <div class="flex justify-between space-x-4 border-t border-gray-500">
      <p id="quiz-duration" class="flex-1 uppercase font-light text-xl text-center p-1">
        <span class="text-2xl">
          <%= format_as_two_digits(@quiz.time_to_complete) %>
        </span><br>
        Minutes
      </p>

      <p id="quiz-question-count" class="flex-1 uppercase font-light text-xl text-center border-l border-gray-500 p-1">
        <span class="text-2xl">
          <%= format_as_two_digits(@quiz.questions.count) %>
        </span><br>
        Questions
      </p>
    </div>
  </section>

  <div class="flex flex-col md:flex-row p-4 border border-gray-500 rounded space-y-4 md:space-y-0 md:space-x-4">
    <% if @in_progress_answer_sheet.present? %>
      <div id="resume-quiz" class="flex items-center bg-primary text-white pl-4 overflow-hidden rounded justify-center">
        <span class="mr-4">Resume Quiz?</span>
        <div class="flex">
          <%= link_to "Yes", resume_answer_sheet_path(@in_progress_answer_sheet), class: "btn btn-success text-white" %>
          <%= button_to "No", answer_sheet_path(@in_progress_answer_sheet),
              method: :delete,
              class: "btn btn-alert text-white",
              data: { turbo_method: :delete, turbo_confirm: "Are you sure? Clicking 'Ok' will reset your progress." } %>
        </div>
      </div>

    <% else %>
      <%= button_to answer_sheets_path,
                    params: { answer_sheet: { quiz_id: @quiz.id, user_id: current_user.id } },
                    class: "flex items-center justify-center btn btn-primary rounded" do %>
        <%= render "icons/play_circle", klass: "size-5 mr-1" %> Start Quiz
      <% end %>
    <% end %>

    <%= link_to "#", class: "flex items-center justify-center btn btn-success rounded" do %>
      <%= render "icons/plus", klass: "size-5 mr-1" %> Add to Study Plan
    <% end %>
  </div>
</div>
