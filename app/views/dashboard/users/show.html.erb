<div class="flex flex-col gap-4 p-4 border border-gray-500 md:flex-row rounded-xl">
  <div
    class="flex flex-col items-center w-full p-4 border-b border-r-0 border-gray-500 bg-gray-950 group md:w-1/3 md:border-r md:border-b-0"
    data-controller="users--avatar-uploader">
    <div
      id="user_profile_upload"
      class="cursor-pointer group-[.is-active]:border-emerald-500 group/dropzone hover:border-emerald-500 transition ease-in-out duration-500 box-content relative flex items-center justify-center p-4 mb-2 overflow-hidden bg-gray-800 border-2 border-gray-500 rounded-full h-28 w-28"
      data-users--avatar-uploader-target="dropzone"
      data-action="
      dragover->users--avatar-uploader#onDragOver
      dragleave->users--avatar-uploader#onDragLeave
      drop->users--avatar-uploader#onDrop
      click->users--avatar-uploader#onBrowse">
      <% if @user.avatar.attached? %>
        <%= image_tag @user.avatar,
          class: "#{"hidden" unless @user.avatar} group-[.is-active]:opacity-25 group-hover/dropzone:opacity-25 absolute inset-0 z-40 object-cover w-full h-full transition ease-in-out duration-500",
          data:  { "users--avatar-uploader-target": "preview" } %>
      <% end %>
      <div class="group-[.is-active]:border-emerald-500 group-hover/dropzone:border-emerald-500 relative z-30 p-4 border-2 border-gray-500 border-dashed rounded-md cursor-pointer transition ease-in-out duration-500"
           data-users--avatar-uploader-target="dropzoneContent">
        <%= form_with model: @user, url: dashboard_user_path(@user), data: { "users--avatar-uploader-target": "avatarForm" } do |ff| %>
          <%= ff.file_field :avatar,
            accept: "image/*",
            class: "hidden",
            data: { "users--avatar-uploader-target": "fileInput", action: "change->users--avatar-uploader#onChange" }%>
        <% end %>
        <%= render_icon "camera",
              klass: "size-12 stroke-gray-500 group-[.is-active]:stroke-emerald-500 group-hover/dropzone:stroke-emerald-500 transition ease-in-out duration-500",
              data: { "users--avatar-uploader-target": "icon" } %>
        <p class="text-gray-500 sr-only">Click or drag an image here to upload</p>
      </div>
    </div>
    <div class="text-center">
      <h3 class="text-lg font-semibold text-white">
        <%= @user.username %>
      </h3>
      <p class="text-sm text-gray-400">
        <%= @user.email %>
      </p>
    </div>
    <%= form_with model: @user, url: dashboard_user_path(@user), class: 'flex flex-col w-full' do |f| %>
      <div class="flex flex-col mt-10 border-t border-gray-500">
        <div class="my-4 field">
          <%= f.label :bio, class: "text-white text-xs font-semibold uppercase mb-2" %>
          <%= f.text_area :bio, rows: 8, placeholder: "Tell others a bit about yourself.", class: "flex grow resize-none shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" %>
          <%= display_field_error(@user, :bio) %>
        </div>
        <div class="flex items-center actions">
          <%= f.submit 'Update Bio', class: "text-center btn-success text-white font-semibold uppercase py-2 px-4 rounded focus:outline-none focus:shadow-outline actions cursor-pointer" %>
        </div>
      </div>
    <% end %>
  </div>
  <div class="w-full md:w-2/3">
    <section>
      <h2 class="mb-4 text-lg">
        General Information
      </h2>
      <%= render "dashboard/users/general_information", user: @user %>
    </section>
    <hr class="mb-4 border-gray-500">
    <section>
      <h2 class="mb-4 text-lg">
        Account Security
      </h2>
      <div>
        <%= render "users/passwords/form", user: @user %>
      </div>
    </section>
  </div>
</div>
